(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{23:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(18),u=n.n(c),s=(n(23),n(9)),o=n(1),i=n.n(o),l=n(4),p=n(5),d=n(0),b=function(e){return Object(d.jsxs)("div",{children:["filter phonebook ",Object(d.jsx)("input",{value:e.value,onChange:e.action})]})},f=function(e){var t=e.nameAdder,n=e.newName,r=e.nameChanger,a=e.newNumber,c=e.numberChanger;return Object(d.jsxs)("form",{children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{value:n,onChange:r})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{value:a,onChange:c})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{onClick:t,children:"add"})})]})},j=function(e){var t=e.person,n=e.deleteAction;return Object(d.jsxs)("p",{children:[t.name," ",t.number," ",Object(d.jsx)("button",{onClick:function(){return n(t.name,t.id)},children:"delete"})]})},h=function(e){var t=e.persons,n=e.filterString,r=e.deleteAction;return Object(d.jsx)("div",{children:t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(d.jsx)(j,{person:e,deleteAction:r},e.name)}))})},v=n(6),m=n.n(v),x="/api/persons",O=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=y,e.next=4,m.a.get(x);case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,200));case 8:e.prev=8,e.t2=e.catch(0),C(e.t2);case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post(x,t);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),C(e.t0),e.abrupt("return",e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=y,e.next=4,m.a.delete("".concat(x,"/").concat(t));case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,200));case 8:e.prev=8,e.t2=e.catch(0),C(e.t2);case 11:return e.abrupt("return",{});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=y,e.next=4,m.a.put("".concat(x,"/").concat(t.id),t);case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,200));case 8:return e.prev=8,e.t2=e.catch(0),C(e.t2),e.abrupt("return",e.t2.response);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),y=function(e,t){return e.status===t?e.data:null},C=function(e){console.log(e.response)},A={getAll:O,addPerson:w,deletePerson:g,updatePerson:k},S=function(e){var t=e.message;return null===t?null:Object(d.jsx)("div",{className:"message",children:t})},P=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),u=Object(p.a)(c,2),o=u[0],j=u[1],v=Object(r.useState)(""),m=Object(p.a)(v,2),x=m[0],O=m[1],w=Object(r.useState)(""),g=Object(p.a)(w,2),k=g[0],y=g[1],C=Object(r.useState)(null),P=Object(p.a)(C,2),N=P[0],D=P[1];Object(r.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.getAll();case 3:t=e.sent,a(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0,"no persons could be downloaded");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var E=function(e){D(e),setTimeout((function(){return D(null)}),5e3)},J=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,c,u,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n.some((function(e){return e.name===x}))){e.next=10;break}if(!window.confirm("".concat(x," is already added to phonebook, replace the old number with a new one?"))){e.next=7;break}return r=n.find((function(e){return e.name===x})),c=Object(s.a)(Object(s.a)({},r),{},{number:k}),e.next=7,B(c);case 7:return e.abrupt("return");case 10:return u={name:x,number:k},e.prev=11,e.next=14,A.addPerson(u);case 14:200===(o=e.sent).status?(a(n.concat(o.data)),O(""),y(""),E("".concat(x," was added"))):400===o.status?E(o.data.error):E("unknown error"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),console.log(e.t0,"couldn't add a new person");case 21:case"end":return e.stop()}}),e,null,[[11,18]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Delete ".concat(t,"?"))){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,A.deletePerson(r);case 5:a(n.filter((function(e){return e.id!==r}))),E("".concat(t," was deleted")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0,"couldn't delete the person");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.updatePerson(t);case 3:404===(r=e.sent).status?(E("".concat(t.name," has already been deleted from the server")),a(n.filter((function(e){return e.id!==t.id})))):400===r.status?E(r.data.error):400!==r.status&&(a(n.map((function(e){return e.id!==t.id?e:r}))),O(""),y(""),E("".concat(t.name," was updated"))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0,"coudn't update the person");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(S,{message:N}),Object(d.jsx)(b,{value:o,action:function(e){j(e.target.value)}}),Object(d.jsx)("h3",{children:"Add new person"}),Object(d.jsx)(f,{nameAdder:J,newName:x,nameChanger:function(e){O(e.target.value)},newNumber:k,numberChanger:function(e){y(e.target.value)}}),Object(d.jsx)("h3",{children:"Numbers"}),Object(d.jsx)(h,{persons:n,filterString:o,deleteAction:L})]})};u.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(P,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.6140b713.chunk.js.map