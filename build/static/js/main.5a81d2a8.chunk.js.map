{"version":3,"sources":["components/SearchField.js","components/PersonAdder.js","components/Person.js","components/Persons.js","services/persons.js","components/Message.js","App.js","index.js"],"names":["SearchField","props","value","onChange","action","PersonAdder","nameAdder","newName","nameChanger","newNumber","numberChanger","onSubmit","type","Person","person","deleteAction","name","number","onClick","id","Persons","persons","filterString","filter","toLowerCase","includes","map","baseUrl","getAll","a","checkResponse","axios","get","handleError","addPerson","newPerson","post","deletePerson","delete","updatePerson","put","response","status","data","error","console","log","exports","Message","message","className","App","useState","setPersons","setFilterString","setNewName","setNewNumber","setMessage","useEffect","personService","fetchData","updateMessage","newMessage","setTimeout","event","preventDefault","some","window","confirm","personToUpdate","find","responseData","concat","nameEraser","p","target","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5a81d2a8.chunk.js","sourcesContent":["import React from 'react'\n\nconst SearchField = (props) => {\n    return (\n        <div>\n            filter phonebook <input value={props.value} onChange={props.action} />\n        </div>\n    )\n}\n\nexport default SearchField","import React from 'react'\n\nconst PersonAdder = ({nameAdder, newName, nameChanger, newNumber, numberChanger}) => {\n    return (\n        <form onSubmit={nameAdder}>\n            <div>\n                name: <input value={newName} onChange={nameChanger} />\n            </div>\n            <div>\n                number: <input value={newNumber} onChange={numberChanger} />\n            </div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonAdder","import React from 'react'\n\nconst Person = ({ person, deleteAction }) => (\n    <p>\n        {person.name} {person.number} <button onClick={() => deleteAction(person.name, person.id)}>delete</button>\n    </p>\n)\n\nexport default Person","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Persons = ({ persons, filterString, deleteAction }) => (\n    <div>\n        {\n            persons.filter(\n                person => person.name.toLowerCase().includes(filterString.toLowerCase())\n            )\n                .map(\n                    person => <Person key={person.name} person={person} deleteAction={deleteAction} />\n                )\n        }\n    </div>\n)\n\nexport default Persons","import axios from \"axios\";\n\nconst baseUrl = '/api/persons'\n\nconst getAll = async () => {\n    // according to https://github.com/axios/axios#example\n    // it is possible to use modern async/await with axios\n    // it's basically the same but more readable\n    try {\n        return checkResponse(await axios.get(baseUrl), 200)\n    } catch (error) {\n        handleError(error)\n    }\n    // return empty array by default\n    return []\n}\n\nconst addPerson = async (newPerson) => {\n    try {\n        return checkResponse(await axios.post(baseUrl, newPerson), 200)\n    } catch (error) {\n        handleError(error)\n    }\n    return {}\n}\n\nconst deletePerson = async (id) => {\n    try {\n        return checkResponse(await axios.delete(`${baseUrl}/${id}`), 200)\n    } catch (error) {\n        handleError(error)\n    }\n    return {}\n}\n\nconst updatePerson = async (person) => {\n    try {\n        return checkResponse(await axios.put(`${baseUrl}/${person.id}`, person), 200)\n    } catch (error) {\n        handleError(error)\n        return null\n    }\n}\n\nconst checkResponse = (response, status) => {\n    if (response.status === status) {\n        return response.data\n    }\n    return null\n}\n\nconst handleError = (error) => {\n    // for now console.log is enough\n    console.log(error)\n}\n\nconst exports = { getAll, addPerson, deletePerson, updatePerson }\n\nexport default exports","import React from \"react\";\n\nconst Message = ({ message }) => {\n    if (message === null)\n        return null\n    return (\n        <div className=\"message\">\n            {message}\n        </div>\n    )\n}\n\nexport default Message","import React, { useEffect, useState } from 'react'\nimport SearchField from './components/SearchField'\nimport PersonAdder from './components/PersonAdder'\nimport Persons from './components/Persons'\nimport personService from './services/persons'\nimport Message from './components/Message'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [filterString, setFilterString] = useState('')\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [message, setMessage] = useState(null)\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const data = await personService.getAll()\n        setPersons(data)\n      } catch (error) {\n        console.log(error, 'no persons could be downloaded')\n      }\n    }\n    fetchData()\n  }, [])\n\n  const updateMessage = (newMessage) => {\n    setMessage(newMessage)\n    setTimeout(() => setMessage(null), 5000)\n  }\n\n  // this function needs some refactoring...\n  const nameAdder = async (event) => {\n    event.preventDefault()\n    // Let's see if name already exists\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some\n    if (persons.some(person => person.name === newName)) {\n      // Name already exists -> ask to update\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const personToUpdate = persons.find(person => person.name === newName)\n        personToUpdate.name = newName\n        personToUpdate.number = newNumber\n        // return value 0 = ok, <0 = failure\n        if (await updatePerson(personToUpdate) < 0) {\n          updateMessage(`${newName} has already been deleted from the server`)\n          setPersons(persons.filter(person => person.id !== personToUpdate.id))\n          return\n        }\n        setNewName('')\n        setNewNumber('')\n        updateMessage(`${newName} was updated`)\n      }\n      return\n    }\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    }\n    try {\n      const responseData = await personService.addPerson(newPerson)\n      setPersons(persons.concat(responseData))\n      setNewName('')\n      setNewNumber('')\n      updateMessage(`${newName} was added`)\n    } catch (error) {\n      console.log(error, 'couldn\\'t add a new person')\n    }\n  }\n\n  const nameEraser = async (name, id) => {\n    if (!window.confirm(`Delete ${name}?`)) {\n      return\n    }\n    try {\n      await personService.deletePerson(id)\n      setPersons(persons.filter(person => person.id !== id))\n      updateMessage(`${name} was deleted`)\n    } catch (error) {\n      console.log(error, 'couldn\\'t delete the person')\n    }\n  }\n\n  const updatePerson = async (person) => {\n    try {\n      const responseData = await personService.updatePerson(person)\n      if (responseData === null) {\n        return -1\n      }\n      setPersons(persons.map(p => p.id !== person.id ? p : responseData))\n      return 0\n    } catch (error) {\n      console.log(error, 'coudn\\'t update the person')\n      return -1\n    }\n  }\n\n  const filterStringChanger = (event) => {\n    setFilterString(event.target.value)\n  }\n\n  const nameChanger = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const numberChanger = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message message={message} />\n      <SearchField\n        value={filterString}\n        action={filterStringChanger}\n      />\n\n      <h3>Add new person</h3>\n      <PersonAdder\n        nameAdder={nameAdder}\n        newName={newName}\n        nameChanger={nameChanger}\n        newNumber={newNumber}\n        numberChanger={numberChanger}\n      />\n\n      <h3>Numbers</h3>\n      <Persons\n        persons={persons}\n        filterString={filterString}\n        deleteAction={nameEraser}\n      />\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}