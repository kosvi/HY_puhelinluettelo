(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{22:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(17),u=n.n(c),s=(n(22),n(1)),o=n.n(s),i=n(4),l=n(5),p=n(0),d=function(e){return Object(p.jsxs)("div",{children:["filter phonebook ",Object(p.jsx)("input",{value:e.value,onChange:e.action})]})},b=function(e){var t=e.nameAdder,n=e.newName,r=e.nameChanger,a=e.newNumber,c=e.numberChanger;return Object(p.jsxs)("form",{onSubmit:t,children:[Object(p.jsxs)("div",{children:["name: ",Object(p.jsx)("input",{value:n,onChange:r})]}),Object(p.jsxs)("div",{children:["number: ",Object(p.jsx)("input",{value:a,onChange:c})]}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var t=e.person,n=e.deleteAction;return Object(p.jsxs)("p",{children:[t.name," ",t.number," ",Object(p.jsx)("button",{onClick:function(){return n(t.name,t.id)},children:"delete"})]})},j=function(e){var t=e.persons,n=e.filterString,r=e.deleteAction;return Object(p.jsx)("div",{children:t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(p.jsx)(f,{person:e,deleteAction:r},e.name)}))})},h=n(6),v=n.n(h),m="/api/persons",x=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=k,e.next=4,v.a.get(m);case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,200));case 8:e.prev=8,e.t2=e.catch(0),y(e.t2);case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=k,e.next=4,v.a.post(m,t);case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,200));case 8:e.prev=8,e.t2=e.catch(0),y(e.t2);case 11:return e.abrupt("return",{});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=k,e.next=4,v.a.delete("".concat(m,"/").concat(t));case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,200));case 8:e.prev=8,e.t2=e.catch(0),y(e.t2);case 11:return e.abrupt("return",{});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=k,e.next=4,v.a.put("".concat(m,"/").concat(t.id),t);case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,200));case 8:return e.prev=8,e.t2=e.catch(0),y(e.t2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),k=function(e,t){return e.status===t?e.data:null},y=function(e){console.log(e)},C={getAll:x,addPerson:O,deletePerson:w,updatePerson:g},A=function(e){var t=e.message;return null===t?null:Object(p.jsx)("div",{className:"message",children:t})},S=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),u=Object(l.a)(c,2),s=u[0],f=u[1],h=Object(r.useState)(""),v=Object(l.a)(h,2),m=v[0],x=v[1],O=Object(r.useState)(""),w=Object(l.a)(O,2),g=w[0],k=w[1],y=Object(r.useState)(null),S=Object(l.a)(y,2),P=S[0],N=S[1];Object(r.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.getAll();case 3:t=e.sent,a(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0,"no persons could be downloaded");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var D=function(e){N(e),setTimeout((function(){return N(null)}),5e3)},E=function(){var e=Object(i.a)(o.a.mark((function e(t){var r,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n.some((function(e){return e.name===m}))){e.next=17;break}if(!window.confirm("".concat(m," is already added to phonebook, replace the old number with a new one?"))){e.next=16;break}return(r=n.find((function(e){return e.name===m}))).name=m,r.number=g,e.next=8,L(r);case 8:if(e.t0=e.sent,!(e.t0<0)){e.next=13;break}return D("".concat(m," has already been deleted from the server")),a(n.filter((function(e){return e.id!==r.id}))),e.abrupt("return");case 13:x(""),k(""),D("".concat(m," was updated"));case 16:return e.abrupt("return");case 17:return c={name:m,number:g},e.prev=18,e.next=21,C.addPerson(c);case 21:u=e.sent,a(n.concat(u)),x(""),k(""),D("".concat(m," was added")),e.next=31;break;case 28:e.prev=28,e.t1=e.catch(18),console.log(e.t1,"couldn't add a new person");case 31:case"end":return e.stop()}}),e,null,[[18,28]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(i.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Delete ".concat(t,"?"))){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,C.deletePerson(r);case 5:a(n.filter((function(e){return e.id!==r}))),D("".concat(t," was deleted")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0,"couldn't delete the person");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=Object(i.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.updatePerson(t);case 3:if(null!==(r=e.sent)){e.next=6;break}return e.abrupt("return",-1);case 6:return a(n.map((function(e){return e.id!==t.id?e:r}))),e.abrupt("return",0);case 10:return e.prev=10,e.t0=e.catch(0),console.log(e.t0,"coudn't update the person"),e.abrupt("return",-1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Phonebook"}),Object(p.jsx)(A,{message:P}),Object(p.jsx)(d,{value:s,action:function(e){f(e.target.value)}}),Object(p.jsx)("h3",{children:"Add new person"}),Object(p.jsx)(b,{nameAdder:E,newName:m,nameChanger:function(e){x(e.target.value)},newNumber:g,numberChanger:function(e){k(e.target.value)}}),Object(p.jsx)("h3",{children:"Numbers"}),Object(p.jsx)(j,{persons:n,filterString:s,deleteAction:J})]})};u.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(S,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.5a81d2a8.chunk.js.map