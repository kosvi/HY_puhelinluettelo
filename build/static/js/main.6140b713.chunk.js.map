{"version":3,"sources":["components/SearchField.js","components/PersonAdder.js","components/Person.js","components/Persons.js","services/persons.js","components/Message.js","App.js","index.js"],"names":["SearchField","props","value","onChange","action","PersonAdder","nameAdder","newName","nameChanger","newNumber","numberChanger","onClick","Person","person","deleteAction","name","number","id","Persons","persons","filterString","filter","toLowerCase","includes","map","baseUrl","getAll","a","checkResponse","axios","get","handleError","addPerson","newPerson","post","response","deletePerson","delete","updatePerson","put","status","data","error","console","log","exports","Message","message","className","App","useState","setPersons","setFilterString","setNewName","setNewNumber","setMessage","useEffect","personService","fetchData","updateMessage","newMessage","setTimeout","event","preventDefault","some","window","confirm","personToUpdate","find","personToUpdateCopy","responseData","concat","nameEraser","p","target","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6140b713.chunk.js","sourcesContent":["import React from 'react'\n\nconst SearchField = (props) => {\n    return (\n        <div>\n            filter phonebook <input value={props.value} onChange={props.action} />\n        </div>\n    )\n}\n\nexport default SearchField","import React from 'react'\n\nconst PersonAdder = ({nameAdder, newName, nameChanger, newNumber, numberChanger}) => {\n    return (\n        <form>\n        {/*<form onSubmit={nameAdder}>*/}\n        <div>\n                name: <input value={newName} onChange={nameChanger} />\n            </div>\n            <div>\n                number: <input value={newNumber} onChange={numberChanger} />\n            </div>\n            <div>\n                <button onClick={nameAdder}>add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonAdder","import React from 'react'\n\nconst Person = ({ person, deleteAction }) => (\n    <p>\n        {person.name} {person.number} <button onClick={() => deleteAction(person.name, person.id)}>delete</button>\n    </p>\n)\n\nexport default Person","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Persons = ({ persons, filterString, deleteAction }) => (\n    <div>\n        {\n            persons.filter(\n                person => person.name.toLowerCase().includes(filterString.toLowerCase())\n            )\n                .map(\n                    person => <Person key={person.name} person={person} deleteAction={deleteAction} />\n                )\n        }\n    </div>\n)\n\nexport default Persons","import axios from \"axios\";\n\nconst baseUrl = '/api/persons'\n\nconst getAll = async () => {\n    // according to https://github.com/axios/axios#example\n    // it is possible to use modern async/await with axios\n    // it's basically the same but more readable\n    try {\n        return checkResponse(await axios.get(baseUrl), 200)\n    } catch (error) {\n        handleError(error)\n    }\n    // return empty array by default\n    return []\n}\n\nconst addPerson = async (newPerson) => {\n    try {\n        const response = await axios.post(baseUrl, newPerson)\n        return response\n    } catch (error) {\n        handleError(error)\n        return error.response\n    }\n}\n\nconst deletePerson = async (id) => {\n    try {\n        return checkResponse(await axios.delete(`${baseUrl}/${id}`), 200)\n    } catch (error) {\n        handleError(error)\n    }\n    return {}\n}\n\nconst updatePerson = async (person) => {\n    try {\n        return checkResponse(await axios.put(`${baseUrl}/${person.id}`, person), 200)\n    } catch (error) {\n        handleError(error)\n        return error.response\n    }\n}\n\nconst checkResponse = (response, status) => {\n    if (response.status === status) {\n        return response.data\n    }\n    return null\n}\n\nconst handleError = (error) => {\n    // for now console.log is enough\n    console.log(error.response)\n}\n\nconst exports = { getAll, addPerson, deletePerson, updatePerson }\n\nexport default exports","import React from \"react\";\n\nconst Message = ({ message }) => {\n    if (message === null)\n        return null\n    return (\n        <div className=\"message\">\n            {message}\n        </div>\n    )\n}\n\nexport default Message","import React, { useEffect, useState } from 'react'\nimport SearchField from './components/SearchField'\nimport PersonAdder from './components/PersonAdder'\nimport Persons from './components/Persons'\nimport personService from './services/persons'\nimport Message from './components/Message'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [filterString, setFilterString] = useState('')\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [message, setMessage] = useState(null)\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const data = await personService.getAll()\n        setPersons(data)\n      } catch (error) {\n        console.log(error, 'no persons could be downloaded')\n      }\n    }\n    fetchData()\n  }, [])\n\n  const updateMessage = (newMessage) => {\n    setMessage(newMessage)\n    setTimeout(() => setMessage(null), 5000)\n  }\n\n  // this function needs some refactoring...\n  const nameAdder = async (event) => {\n    event.preventDefault()\n    // Let's see if name already exists\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some\n    if (persons.some(person => person.name === newName)) {\n      // Name already exists -> ask to update\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const personToUpdate = persons.find(person => person.name === newName)\n        const personToUpdateCopy = {...personToUpdate, number: newNumber}\n        await updatePerson(personToUpdateCopy)\n      }\n      return\n    }\n    else {\n      const newPerson = {\n        name: newName,\n        number: newNumber\n      }\n      try {\n        const responseData = await personService.addPerson(newPerson)\n        if (responseData.status === 200) {\n          setPersons(persons.concat(responseData.data))\n          setNewName('')\n          setNewNumber('')\n          updateMessage(`${newName} was added`)\n        } else if (responseData.status === 400) {\n          updateMessage(responseData.data.error)\n        } else {\n          updateMessage('unknown error')\n        }\n      } catch (error) {\n        console.log(error, 'couldn\\'t add a new person')\n      }\n    }\n  }\n\n  const nameEraser = async (name, id) => {\n    if (!window.confirm(`Delete ${name}?`)) {\n      return\n    }\n    try {\n      await personService.deletePerson(id)\n      setPersons(persons.filter(person => person.id !== id))\n      updateMessage(`${name} was deleted`)\n    } catch (error) {\n      console.log(error, 'couldn\\'t delete the person')\n    }\n  }\n\n  const updatePerson = async (personToUpdate) => {\n    try {\n      const responseData = await personService.updatePerson(personToUpdate)\n      if (responseData.status === 404) {\n        // already deleted\n        updateMessage(`${personToUpdate.name} has already been deleted from the server`)\n        setPersons(persons.filter(person => person.id !== personToUpdate.id))\n      }\n      // if I comment out this else if \n      // the number won't update in the list if it's too short\n      // but I can't see why the number updates in the list if backend doesn't accept the update\n      else if (responseData.status === 400) {\n        updateMessage(responseData.data.error)\n      }\n      else if (responseData.status !== 400) {\n        setPersons(persons.map(p => p.id !== personToUpdate.id ? p : responseData))\n        setNewName('')\n        setNewNumber('')\n        updateMessage(`${personToUpdate.name} was updated`)\n      }\n    } catch (error) {\n      console.log(error, 'coudn\\'t update the person')\n    }\n  }\n\n  const filterStringChanger = (event) => {\n    setFilterString(event.target.value)\n  }\n\n  const nameChanger = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const numberChanger = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message message={message} />\n      <SearchField\n        value={filterString}\n        action={filterStringChanger}\n      />\n\n      <h3>Add new person</h3>\n      <PersonAdder\n        nameAdder={nameAdder}\n        newName={newName}\n        nameChanger={nameChanger}\n        newNumber={newNumber}\n        numberChanger={numberChanger}\n      />\n\n      <h3>Numbers</h3>\n      <Persons\n        persons={persons}\n        filterString={filterString}\n        deleteAction={nameEraser}\n      />\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}